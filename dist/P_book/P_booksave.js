(function(e){typeof define=="function"&&define.amd?define("add",[""],e):e(jQuery)})(function(){$.fn.addModule=function(e,t,n,r){var t=new n(r);e.children(t.id).length==0?(e.append(t.html),setTimeout(function(){t.main(),t.render()},9)):setTimeout(function(){t.main(),t.render()},9)}}),function(e){typeof define=="function"&&define.amd?(requirejs.config({paths:{add:"../tools/addmodule"}}),define("P_booksave",["add"],e)):e(jQuery)}(function(){function e(t){this.html="",this.id="#booksave",this.opts=$.extend({},e.STATE,t)}e.STATE={},e.prototype.main=function(){var e=this.opts,t=this;$("#booksave>form>button").click(function(e){if($("#booksave>form>input:eq(2)").val()=="")alert("标题不能为空");else{var t=[];$("#booksave>ul>li.selected").each(function(e,n){t.push($(this).text())});var n=$("#booksave>form>input"),r=$("#booksave>nav").text(),i=n.eq(0).val(),s=n.eq(1).val(),o=n.eq(2).val(),u=n.eq(3).val(),a=n.eq(4).val(),f=n.eq(5).val(),l=n.eq(6).val(),c=n.eq(7).val(),h=n.eq(8).val(),p=n.eq(9).val(),d=$("#booksave>form>textarea").eq(0).val(),v=$("#booksave>form>textarea").eq(1).val(),m=$("#booksave>form>textarea").eq(2).val(),g=t,y=new FormData;y.append("nav",r),y.append("id",i),y.append("image",s),y.append("title",o),y.append("author",u),y.append("publisher",a),y.append("ISBN",f),y.append("pubdate",l),y.append("pages",c),y.append("binding",h),y.append("price",p),y.append("summary",d),y.append("author_intro",v),y.append("catalog",m),y.append("category",g),console.log(y),$.ajax({url:"/ajax/book/admin/save",type:"POST",cache:!1,data:y,processData:!1,contentType:!1,dataType:"json"}).done(function(e){alert(e.status),$("#booksave>form>input").val(null),$("#booksave>form>textarea").val(null),$("#booksave>nav").text(null),$("#booksave>ul>li").removeClass("selected")}).fail(function(e){alert(e.status)})}})},$("#booksave>ul>li").click(function(e){$(this).toggleClass("selected")}),$("#booksave>button.btn1").click(function(e){var t=$("#booksave>input.input1").val();t?$.ajax({dataType:"jsonp",url:"https://api.douban.com/v2/book/"+t,cache:!0,type:"get",crossDomain:!0,jsonpCallback:"jsonp_callback",success:function(e){var t=e.id,n=e.images.large,r=e.title,i=e.author[0],s=e.publisher,o=e.isbn13,u=e.pubdate,a=e.pages,f=e.binding,l=e.price,c=e.summary,h=e.author_intro,p=e.catalog,d=$("#booksave>form>input");d.eq(0).val(t),d.eq(1).val(n),d.eq(2).val(r),d.eq(3).val(i),d.eq(4).val(s),d.eq(5).val(o),d.eq(6).val(u),d.eq(7).val(a),d.eq(8).val(f),d.eq(9).val(l),$("#booksave>form>textarea").eq(0).val(c),$("#booksave>form>textarea").eq(1).val(h),$("#booksave>form>textarea").eq(2).val(p)}}):alert("id不能为空")}),e.prototype.render=function(){var e=this.opts},$.fn.addModule($("body"),"P_booksave",e)});